import{r as s,j as e,e as D,m as o,u as F,o as O,L as P,s as _,a as E,p as C,f as M,g as U,h as z,i as H}from"./index-CQ_vAxg5.js";const J=({message:n,type:l="success",isVisible:d,onClose:g})=>(s.useEffect(()=>{if(d){const m=setTimeout(()=>{g()},3e3);return()=>clearTimeout(m)}},[d,g]),e.jsx(D,{children:d&&e.jsx(o.div,{initial:{opacity:0,y:-50,x:"-50%"},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.3},className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-6 py-4 rounded-lg shadow-xl backdrop-blur-sm ${l==="success"?"bg-green-500/95 text-white border border-green-400":l==="error"?"bg-red-500/95 text-white border border-red-400":"bg-blue-500/95 text-white border border-blue-400"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:l==="success"?"âœ…":l==="error"?"âŒ":"â„¹ï¸"}),e.jsx("span",{className:"font-semibold",children:n})]})})})),j="keyword_tool_data";function q(){const[n,l]=s.useState(""),[d,g]=s.useState([]),[m,x]=s.useState([]),[h,k]=s.useState(!1),[v,f]=s.useState(""),[i,N]=s.useState(null),[K,T]=s.useState(!0),[p,u]=s.useState({isVisible:!1,message:"",type:"success"}),L=F();s.useEffect(()=>{const t=O(E,a=>{N(a),T(!1)});return()=>t()},[]);const R=async()=>{try{const t=await _(E,C);N(t.user),L("/keyword-tool/dashboard")}catch(t){console.error("Error signing in:",t),u({isVisible:!0,message:"Failed to sign in. Please try again.",type:"error"})}};s.useEffect(()=>{try{const t=localStorage.getItem(j);if(t){const a=JSON.parse(t);a.keyword&&l(a.keyword),a.results&&g(a.results),a.relatedKeywords&&x(a.relatedKeywords)}}catch(t){console.error("Error loading data from localStorage:",t)}},[]);const I=()=>{l(""),g([]),x([]),f("");try{localStorage.removeItem(j)}catch(t){console.error("Error clearing localStorage:",t)}},V=(t,a)=>{const y=Math.floor(Math.random()*41)+60,b=a.length*100+Math.floor(Math.random()*401)+100;let c=0;return a.length>0?(c=a.reduce((w,r)=>{const A=typeof r=="string"?r:r.keyword||"";return w+A.length},0),c=Math.round(c/a.length)):c=t.length,{seoScore:y,searchVolume:b,averageLength:c}},S=async()=>{if(n.trim()){k(!0),f(""),g([]),x([]);try{const a=await(await fetch(`https://google-search74.p.rapidapi.com/?query=${encodeURIComponent(n)}&limit=10&related_keywords=true`,{headers:{"x-rapidapi-host":"google-search74.p.rapidapi.com","x-rapidapi-key":"4a04ac759dmsh0ac4120760e65d0p1da314jsn3071e48385e9"}})).json();console.log("API Data:",a);const y=a?.related_keywords?.keywords||[],b=a?.results||[];x(y),g(b);const c=V(n.trim(),y),w=y.map(r=>typeof r=="string"?r:r.keyword||"");if(i)try{await M(U(z,"keyword_searches"),{uid:i.uid,keyword:n.trim(),searchDate:H(),averageSEOScore:c.seoScore,length:c.averageLength,relatedKeywords:w}),u({isVisible:!0,message:"Keyword analysis saved successfully! ðŸŽ‰",type:"success"})}catch(r){console.error("Error saving to Firestore:",r),u({isVisible:!0,message:"Failed to save to dashboard. Please try again.",type:"error"})}try{const r={keyword:n.trim(),results:b,relatedKeywords:y,timestamp:new Date().toISOString()};localStorage.setItem(j,JSON.stringify(r))}catch(r){console.error("Error saving to localStorage:",r)}}catch{f("Failed to fetch keywords. Please try again."),u({isVisible:!0,message:"Failed to fetch keywords. Please try again.",type:"error"})}finally{k(!1)}}};return K?e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full"})}):e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 px-3 py-10 text-gray-800 dark:text-gray-100",children:[e.jsx(J,{message:p.message,type:p.type,isVisible:p.isVisible,onClose:()=>u({...p,isVisible:!1})}),e.jsxs(o.div,{className:"text-center mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"mb-6",children:"ðŸ” Keyword & SEO Analyzer"}),e.jsx("div",{className:"flex items-center flex-wrap justify-center gap-4",children:i?e.jsxs(e.Fragment,{children:[e.jsx(P,{to:"/keyword-tool/dashboard",className:"inline-flex items-center whitespace-nowrap gap-2 bg-main/80 hover:bg-main duration-300 text-white rounded-md px-2.5 py-1.5 font-medium",children:e.jsx("span",{children:"ðŸ“Š View Dashboard"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:i.photoURL||"",alt:i.displayName||"User",className:"w-8 h-8 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap dark:text-gray-400",children:i.displayName||"User"})]})]}):""})]}),e.jsxs(o.div,{className:"max-w-xl mx-auto flex flex-col md:flex-row items-center gap-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("input",{type:"text",placeholder:"Enter your keyword...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-gray-800 focus:ring-2 focus:ring-blue-500 outline-none transition",value:n,onChange:t=>l(t.target.value),onKeyDown:t=>t.key==="Enter"&&S()}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i?S:R,disabled:h||!i,className:"bg-main/80 hover:bg-main duration-300 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-5 py-2 rounded-lg transition shadow-md",children:i?h?"Searching...":"Search":"Login to Search"}),(d.length>0||m.length>0)&&e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:I,className:"bg-red-600 hover:bg-red-700 text-white font-semibold px-5 py-2 rounded-lg transition",children:"Clear"})]}),h&&e.jsx("p",{className:"text-center mt-6 text-blue-500 animate-pulse",children:"Fetching results..."}),v&&e.jsx("p",{className:"text-center mt-6 text-red-500",children:v}),!h&&m.length>0&&e.jsxs(o.div,{className:"max-w-2xl mx-auto mt-10 bg-gray-50 dark:bg-gray-800 rounded-xl shadow-lg p-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-xl font-bold mb-3 text-blue-600 dark:text-blue-400",children:"Related Keywords"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:m.map((t,a)=>e.jsx(o.li,{className:"text-gray-800 dark:text-gray-200",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:a*.05},children:t.keyword},a))})]}),!h&&d.length>0&&e.jsxs(o.div,{className:"max-w-3xl mx-auto mt-10 bg-gray-50 dark:bg-gray-800 rounded-xl shadow-lg p-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-xl font-bold mb-3 text-green-600 dark:text-green-400",children:"Top Search Results"}),e.jsx("div",{className:"space-y-4",children:d.map((t,a)=>e.jsxs(o.div,{className:"border-b border-gray-200 dark:border-gray-700 pb-3",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:a*.07},children:[e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-lg font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t.description})]},a))})]})]})}export{q as default};
